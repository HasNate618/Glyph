# Glyph keymaps
#
# This file is loaded on startup from:
#   %APPDATA%\Glyph\keymaps.yaml
#
# Schema:
# bindings: [ { key, label, action?, children? } ]
#
# Notes:
# - key can be multi-character (ex: "mx"), which is useful for sequences like wmx.
# - To use a named multi-letter key as a *single* step (e.g., Win, Left, Enter, F1), use either:
#     - keyTokens: ["Win"]
#     - or embed tokens inside key with angle brackets: key: "w<Win>" (Win after 'w')
#   This avoids ambiguity between a named key ("Win") and typing a sequence of letters ('w''i''n').
# - action must be a known action id; unknown actions are skipped (but the prefix label stays).

bindings:
  - key: o
    label: Open
    children:
      - key: b
        label: Open Browser
        action: openBrowser
      - key: t
        label: Terminal
        exec: wt
      - key: m
        label: Task Manager
        exec: taskmgr
      - key: v
        label: VSCode
        exec: code
      - key: s
        label: Spotify
        exec: '%APPDATA%\Spotify\Spotify.exe'
      - key: st
        label: Steam
        exec: 'C:\Program Files (x86)\Steam\steam.exe'
      - key: n
        label: Notepad
        exec: notepad
      - key: d
        label: Discord
        exec: '%LOCALAPPDATA%\Discord\Update.exe'
        execArgs: --processStart Discord.exe
      - key: f
        label: File
        exec: explorer
  - key: m
    label: Media
    children:
      - key: p
        label: Play / Pause
        action: mediaPlayPause
      - key: n
        label: Next Track
        action: mediaNext
      - key: b
        label: Previous Track
        action: mediaPrev
      - key: m
        label: Toggle Volume Mute
        action: volumeMute

  - key: Win
    label: Windows
    children:
      - key: l
        label: Lock
        send: Win+L
      - key: sl
        label: Sleep
        exec: rundll32.exe
        execArgs: 'powrprof.dll,SetSuspendState 0,1,0'
      - key: sd
        label: Shutdown
        exec: shutdown
        execArgs: '/s /t 0'
      - key: rs
        label: Restart
        exec: shutdown
        execArgs: '/r /t 0'
      - key: d
        label: Show Desktop
        send: Win+D

  - key: w
    label: Manage Windows
    children:
      - key: n
        label: Minimize
        action: windowMinimize
      - key: m
        label: Maximize
        send: Win+Shift+Up
      - key: t
        label: Alt+Tab
        send: Alt+Tab
      - key: w
        label: Close (Alt+F4)
        send: Alt+F4
      - key: v
        label: Task View
        send: Win+Tab
      - key: s
        label: Snap
        children:
          - key: left
            label: Snap Left
            send: Win+Left
          - key: right
            label: Snap Right
            send: Win+Right
          - key: up
            label: Snap Maximize
            send: Win+Up
          - key: down
            label: Snap Minimize
            send: Win+Down
      - key: m
        label: Move Between Monitors
        children:
          - key: left
            label: Move Left Monitor
            send: Win+Shift+Left
          - key: right
            label: Move Right Monitor
            send: Win+Shift+Right

  - key: t
    label: Text
    children:
      - key: c
        label: Copy
        send: Ctrl+C
      - key: v
        label: Paste
        send: Ctrl+V
      - key: x
        label: Cut
        send: Ctrl+X
      - key: a
        label: Select All
        send: Ctrl+A
      - key: u
        label: Undo
        send: Ctrl+Z
      - key: r
        label: Replace
        send: Ctrl+H
      - key: f
        label: Find
        send: Ctrl+F
                  
      # Vim-style operations: use multi-stroke keys for safe, program-friendly edits
      - key: y
        label: Yank Line
        steps:
          - send: Home
          - send: Shift+End
          - send: Ctrl+C
      - key: d
        label: Delete Line
        steps:
          - send: Home
          - send: Shift+End
          - send: Ctrl+X
      - key: p
        label: Duplicate Line
        steps:
          - send: Home
          - send: Shift+End
          - send: Ctrl+C
          - send: End
          - send: Enter
          - send: Ctrl+V

      # Text expansion macros
      - key: e
        label: Expansion
        children:
          - key: e
            label: Email
            type: 'your.name@example.com'
          - key: a
            label: Address
            type: '123 Example St\nCity, State ZIP'
          - key: w
            label: Website
            type: 'https://example.com'
          - key: l
            label: LinkedIn
            type: 'https://www.linkedin.com/in/yourprofile'
          - key: p
            label: Phone
            type: '+1 (555) 123-4567'

  - key: ","
    label: Glyph Settings
    children:
      - key: o
        label: Open Glyph GUI
        action: openGlyphGui
      - key: c
        label: Open Config Folder
        action: openConfig
      - key: l
        label: Open Log Folder
        action: openLogs
      - key: r
        label: Reload keymaps
        action: reloadKeymaps
      - key: b
        label: Toggle Breadcrumbs Mode
        action: toggleBreadcrumbsMode
      - key: q
        label: Quit Glyph
        action: quitGlyph
      - key: t
        label: Theme
        children:
          - key: f
            label: Fluent
            setTheme: 'fluent'
          - key: c
            label: Catppuccin Mocha
            setTheme: 'catppuccinMocha'
          - key: l
            label: Light
            setTheme: 'light'
          - key: n
            label: Nord
            setTheme: 'nord'
          - key: d
            label: Darcula
            setTheme: 'darcula'
          - key: r
            label: RosePine
            setTheme: 'rosePine'
          - key: t
            label: Tokyo Night
            setTheme: 'tokyoNight'

  - key: g
    label: Git
    children:
      - key: s
        label: Status
        steps:
          - type: git status
          - send: Enter
      - key: a
        label: Add All
        steps:
          - type: git add .
          - send: Enter
      - key: aa
        label: Add All (Enter)
        steps:
          - type: git add .
          - send: Enter
      - key: c
        label: Commit
        steps:
          - type: 'git commit -m ""'
          - send: Left
      - key: p
        label: Push
        steps:
          - type: git push
          - send: Enter
      - key: pp
        label: Push (Enter)
        steps: 
          - type: git push
          - send: Enter
      - key: l
        label: Pull
        steps:
          - type: git pull
          - send: Enter
      - key: ll
        label: Pull (Enter)
        steps:
          - type: git pull
          - send: Enter
      - key: b
        label: Branches
        steps:
          - type: git branch
          - send: Enter
      - key: f
        label: Fetch
        steps:
          - type: git fetch
          - send: Enter
      - key: m
        label: Merge
        steps:
          - type: git merge 
          - send: Left
      - key: r
        label: Rebase
        steps:
          - type: git rebase 
          - send: Left
      - key: d
        label: Diff
        steps:
          - type: git diff
          - send: Enter
      - key: co
        label: Checkout
        steps:
          - type: git checkout 

  - key: ss
    label: Screenshot
    send: Win+Shift+S
  
  - key: p
    label: Program

apps:
  - process: Spotify
    bindings:
      - key: p
        label: Play / Pause
        action: mediaPlayPause
      - key: n
        label: Next Track
        action: mediaNext
      - key: b
        label: Previous Track
        action: mediaPrev

  - process: Discord
    bindings:
      - key: m
        label: Toggle Mute
        send: Ctrl+Shift+M

  - process: WindowsTerminal
    bindings:
      - key: f
        label: Fetch
        steps:
          - type: fastfetch
          - send: Enter
      - key: ","
        label: Settings
        send: Ctrl+, 
      - key: p
        label: Switch to Powershell
        type: powershell
      - key: c
        label: Switch to Command Prompt
        type: cmd
      - key: 1
        label: Tab 1
        send: Ctrl+Alt+1
      - key: 2
        label: Tab 2
        send: Ctrl+Alt+2
      - key: 3
        label: Tab 3
        send: Ctrl+Alt+3

  - process: Code
    bindings:
      - key: s
        label: Save All
        send: Ctrl+K S
      - key: '['
        label: Toggle Side Bar
        send: Ctrl+B
      - key: ']'
        label: Toggle Secondary Side Bar
        send: Ctrl+Alt+B
      - key: j
        label: Toggle Panel
        send: Ctrl+J
      - key: np
        label: npm run dev
        steps:
          - type: 'npm run dev'
          - send: Enter
      - key: n
        label: New File
        send: Ctrl+Alt+Win+N
      - key: w
        label: New Window
        send: Ctrl+Shift+N

groups:
  - name: Browser
    processes: [ chrome, msedge, firefox, brave, opera, zen ]
    bindings:
      - key: '['
        label: Toggle Side Bar
        send: Ctrl+S
      - key: t
        label: New Tab
        send: Ctrl+T
      - key: w
        label: Close Tab
        send: Ctrl+W
      - key: f
        label: Find
        send: Ctrl+F
      - key: h
        label: History
        send: Ctrl+H
      - key: u
        label: Reopen Closed Tab
        send: Ctrl+Shift+T
      - key: r
        label: Reload
        send: Ctrl+R
      - key: l
        label: Focus Address Bar
        send: Alt+D
      - key: s
        label: Save Page
        send: Ctrl+Alt+Shift+S
      - key: p
        label: Print Page
        send: Ctrl+P
      - key: d
        label: Bookmark Page
        send: Ctrl+D
      - key: j
        label: Downloads
        send: Ctrl+J
      - key: ']'
        label: Switch Workspace
        send: Ctrl+Alt+Left

  - name: JetBrains
    processes: [ idea64, pycharm64, webstorm64, datagrip64, clion64, studio64 ]
    bindings:
      - key: '['
        label: Toggle Side Bar
        send: Ctrl+Shift+E
      - key: f
        label: Find in Files
        send: Ctrl+Shift+F
      - key: r
        label: Run
        send: Ctrl+F5
      - key: n
        label: New File
        send: Alt+Insert
      - key: t
        label: Run Tests
        send: Ctrl+Shift+F10

